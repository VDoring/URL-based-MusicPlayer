#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <Windows.h>
#include <string.h>

FILE *fp; // .txt파일 전용 파일포인터

int Random;
int Play_Random_count = 0;
int save_random_number[10000] = { 0, };
void Save_RandomNum() { //랜덤 모드시 라인 넘버를 저장하는 함수. 중복으로 음악이 실행되는걸 방지하기 위함
	Play_Random_count++;

	for (int i = 0; i < Play_Random_count; i++) {
		save_random_number[i] = Random;
	}
}


char fileread[4096]; // .txt파일 한줄읽기용 문자열
const char CMD_Static_command_4[100] = { "start chrome --incognito" }; // 크롬 시크릿모드 실행 명령어
char cache_Music1_4[100];
char cache_Music2_4[8092];
char *ptr_linkcut_result;
char *contact_4 = NULL; //cache_Music2_2 문자열에서 자른 나머지 문자열을 저장
char Musiclink_4[8192] = { 0, }; // 최종 음악재생 명령어
void No_overlap_Musiclist_play() { //랜덤모드에서 중복음악재생이 안되는 음악플레이
	fopen_s(&fp, "Mlist.txt", "rt");
	rewind(fp);
	
	for (int i = 0; i < Random; i++) {
		fgets(fileread, sizeof(fileread), fp);
	}

	sprintf_s(cache_Music1_4, sizeof(cache_Music1_4), "%s", CMD_Static_command_4);
	sprintf_s(cache_Music2_4, sizeof(cache_Music2_4), "%s", fileread);

	ptr_linkcut_result = strtok_s(cache_Music2_4, " ", &contact_4); // 한줄 읽은 내용을 띄어쓰기 기준으로 나누어 ptr_linkcut_result에 저장

	sprintf_s(Musiclink_4, sizeof(Musiclink_4), "%s %s", cache_Music1_4, ptr_linkcut_result); // 최종 음악재생 명령어

	system(Musiclink_4);

	fclose(fp);
}